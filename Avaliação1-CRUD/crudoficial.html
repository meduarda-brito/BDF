<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliação - CRUD</title>
    <link rel="stylesheet" href="style.css" />

</head>
<body>
    <br>
    <h1>CRUD - Sistema de Cadastro de Alunos</h1><br><br>

    <!-- Barras -->
    <input type="text" placeholder="Digite seu nome" id="nome">
    <input type="text" placeholder="Digite seu e-mail" id="email">
    <input type="text" placeholder="Digite seu curso" id="curso">
    
    <!-- Botões -->
     <div class="botoes">
    <br>
    <button onclick="adicionarAluno()">Adicionar Aluno - C</button>
    <button onclick="recuperarAluno()">Recuperar Aluno - R</button>
    <button onclick="editarAluno()">Editar Aluno Selecionado - U</button>
    <button onclick="deletarAluno()">Deletar Aluno Selecionado - D</button>
    </div>

    <p id="info"></p>
    <ul id="listaAlunos"></ul> <!-- Como posso adicionar um título como ex.:"Lista de Alunos" assim que a lista começa a se formar?-->

    <script>
        let alunos = [];
        let indiceSelecionado = null; 

         //Adicionar aluno ao Sistema
         function adicionarAluno(){
            var nome = document.getElementById("nome").value;
            var email = document.getElementById("email").value;
            var curso = document.getElementById("curso").value;
            var aluno = {nome, email, curso};
            alunos.push(aluno);
            limparBarras();
            ler();
        }
        
            //Limpar barras de pesquisa 
            function limparBarras(){
            document.getElementById("nome").value = "";
            document.getElementById("email").value = "";
            document.getElementById("curso").value = "";
            }


        function ler() {
            var lista = document.getElementById("listaAlunos");
            lista.innerHTML = "";

            alunos.forEach(function (aluno, index) {
                var item = document.createElement("li");
                item.textContent = aluno.nome + " - " + aluno.email + " - " + aluno.curso;
                item.style.cursor = "pointer";

                item.onclick = function () {
                    indiceSelecionado = index;
                    document.getElementById("info").innerHTML =
                        "<strong> Aluno(a) Selecionado(a): </strong>" + aluno.nome + " - " + aluno.email + " - " + aluno.curso;
                };

                lista.appendChild(item);
            });
    }

        function recuperarAluno(){
            if(indiceSelecionado === null){
            alert("Selecione um aluno para recuperar!");
            return;
        }
            var aluno = alunos[indiceSelecionado];
            document.getElementById("nome").value = aluno.nome;
            document.getElementById("email").value = aluno.email;
            document.getElementById("curso").value = aluno.curso;
    }


       function editarAluno() {
        if(indiceSelecionado === null){
            alert("Selecione um(a) aluno(a) primeiro!");
            return;
        }
        var [nome, email, curso] = getInfo();
        alunos[indiceSelecionado] = {nome, email, curso};
        ler();
        limparBarras();
       }
 
       function getInfo(){
        var nome = document.getElementById("nome").value;
        var email = document.getElementById("email").value;
        var curso = document.getElementById("curso").value;
        if(nome === "" || email === "" || curso === ""){
            alert("Um campo está sem informação");
            return;
        } else {
            return [nome, email, curso];
        }
    }
        
        function deletarAluno() {
            if(indiceSelecionado === null){
            alert("Selecione um(a) aluno(a) primeiro!");
            return;
        }
            alunos.splice(indiceSelecionado, 1);
            indiceSelecionado = null;
            ler();
            document.getElementById("info").textContent = "";

          
        }

    </script>
</body>
</html>